# 更新日志

## [1.2.1] - 2025-03-01

### 修复

- 修复了 `useCDN` 为 true 时本地 mermaid.js 和 CDN mermaid.js 都被加载的问题
- 优化了客户端脚本，增加了对 CDN/本地模式的智能检测

## [1.2.0] - 2025-03-01

### 新增

- 改进本地渲染模式，解决 `useCDN: false` 时的 `document is not defined` 错误
- 添加自动复制 mermaid 库到本地的功能，支持离线使用
- 优化客户端脚本，增加动态加载 mermaid 库的功能
- 添加错误状态样式，提升用户体验
- 改进文档，详细说明本地渲染模式的使用方法

### 改进

- 移除服务器端渲染逻辑，改为完全客户端渲染，提高兼容性
- 优化错误处理，在渲染失败时显示友好的错误提示
- 改进构建脚本，自动处理 mermaid 库和 CSS 文件的复制
- 增强客户端脚本的健壮性，处理各种边缘情况

## [1.1.0] - 2025-03-01

### 新增

- 添加 `renderMermaidDiagrams` 辅助函数，用于手动触发 Mermaid 图表渲染
- 改进客户端脚本，增加更可靠的初始化机制
- 修复页面刷新时 Mermaid 图表不显示的问题
- 添加对 VitePress 路由变化事件的监听，确保在页面切换时重新渲染图表

## [1.0.0] - 2025-03-01

### 新增

- 初始版本发布
- 支持客户端渲染和服务器端渲染两种模式
- 支持通过 CDN 加载 Mermaid 库
- 支持自定义 Mermaid 配置选项
- 支持暗黑模式自动适应

### 新特性

- 支持两种渲染模式：客户端渲染和服务器端渲染
- 支持通过 CDN 或本地库加载 Mermaid
- 支持内联 CSS 或外部 CSS 文件
- 支持暗黑模式自动切换
- 支持所有 Mermaid 图表类型
- 提供完整的配置选项

### 改进

- 优化了 Mermaid 初始化逻辑，减少不必要的重新渲染
- 添加了主题变化监听，自动适应暗黑模式
- 改进了错误处理，在渲染失败时回退到客户端渲染
- 优化了 CSS 样式，提高了图表在不同设备上的显示效果

### 文档

- 添加了详细的使用说明和配置选项文档
- 提供了各种图表类型的示例
